Se crearon dps tablas , [ara poder adiministrar merjo los grupos bi;nerbales 
estas son las consultas en db 


//se crea la tabla de reglas que calsificaran en q grupo vu;lnerable pertenecen 
CREATE TABLE reglas_clasificacion (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    pregunta_id BIGINT UNSIGNED NOT NULL,
    operador ENUM('=', '!=', 'IN', '<=', '>', 'NOT IN') NOT NULL,
    valor TEXT NOT NULL,
    grupo ENUM('Paternal', 'Económico', 'Salud', 'Poblacion Indígena') NOT NULL,
    descripcion VARCHAR(255) DEFAULT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    CONSTRAINT fk_reglas_pregunta FOREIGN KEY (pregunta_id) REFERENCES preguntas(id)
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;
// se crea la tabla donde se encontraran los estudiantes calsificados en dicho grupo 
CREATE TABLE clasificacion_estudiantes (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    estudiante_id BIGINT UNSIGNED NOT NULL,
    grupo ENUM('Paternal', 'Económico', 'Salud', 'Poblacion Indígena') NOT NULL,
    pregunta_id BIGINT UNSIGNED NOT NULL,
    respuesta TEXT NOT NULL,
    fecha_clasificacion TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_clasificacion_estudiante FOREIGN KEY (estudiante_id) REFERENCES estudiantes(id) ON DELETE CASCADE,
    CONSTRAINT fk_clasificacion_pregunta FOREIGN KEY (pregunta_id) REFERENCES preguntas(id) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=utf8mb4;


////////////AUTOMATIZACION DE INSERCION A CLASIFICACION_ESTUDIANTES///////


este codigo es para agregar en encuesta_controller , sera utilixado pero para la encuensta, no en la inyeccion.
<?php
// Supongamos que ya tienes una conexión PDO en $pdo

// Función para evaluar la condición
function evaluarCondicion($respuesta, $operador, $valor) {
    switch ($operador) {
        case '=':
            return $respuesta == $valor;
        case '!=':
            return $respuesta != $valor;
        case 'IN':
            // Convertir la cadena separada por comas a un array
            $valores = array_map('trim', explode(',', $valor));
            return in_array($respuesta, $valores);
        case '<=':
            return floatval($respuesta) <= floatval($valor);
        case '>':
            return floatval($respuesta) > floatval($valor);
        default:
            return false;
    }
}

// Ejemplo: Se reciben las respuestas de la encuesta de un estudiante
// Cada elemento contiene: pregunta_id y la respuesta dada.
$respuestas = [
    ['pregunta_id' => 72, 'respuesta' => 'Si'],
    ['pregunta_id' => 94, 'respuesta' => 'Si'],
    ['pregunta_id' => 73, 'respuesta' => 'Problemas de movilidad motriz'],
    // ... incluir todas las respuestas relevantes
];

// ID del estudiante (debe provenir de la sesión o del formulario)
$estudiante_id = 123;  // Ejemplo

// Recorrer cada respuesta y evaluar las reglas correspondientes
foreach ($respuestas as $resp) {
    $pregunta_id = $resp['pregunta_id'];
    $respuesta_text = $resp['respuesta'];

    // Obtener todas las reglas para esta pregunta
    $stmt = $pdo->prepare("SELECT * FROM reglas_clasificacion WHERE pregunta_id = ?");
    $stmt->execute([$pregunta_id]);
    $reglas = $stmt->fetchAll(PDO::FETCH_ASSOC);

    foreach ($reglas as $regla) {
        if (evaluarCondicion($respuesta_text, $regla['operador'], $regla['valor'])) {
            // Si se cumple la regla, insertar la clasificación
            $stmtInsert = $pdo->prepare("INSERT INTO clasificacion_estudiantes (estudiante_id, grupo, pregunta_id, respuesta) VALUES (?, ?, ?, ?)");
            $stmtInsert->execute([$estudiante_id, $regla['grupo'], $pregunta_id, $respuesta_text]);
        }
    }
}
?>
////////////////////////////FIN CODIGO////////////////
///////////INSERCION DE DATOS PREGUNTAS DE LA INYECCION DE DATOS 




///////POBLACION INDIGENA///////////////
INSERT INTO reglas_clasificacion (pregunta_id, operador, valor, grupo, descripcion)
VALUES 
(10384, '=', 'Si', 'Poblacion Indígena', 'Cualquier respuesta distinta de no (habla o entienede una lengua indigena)'),
(10385, '=', 'Si', 'Poblacion Indígena', 'Cualquier respuesta distinta de no (habla o entienede una lengua indigena)'),
(10386, '=', 'Si', 'Poblacion Indígena', 'Cualquier respuesta distinta de no (habla o entienede una lengua indigena)');

//////////END POBLACION INDIGENA/////////////
/////////////////ECONOMICO///////////////////
INSERT INTO reglas_clasificacion (pregunta_id, operador, valor, grupo, descripcion)
VALUES
(10420, '=', 'SI', 'Económico', 'Respuesta Si a cursa alguna otra carrera alcutalmente ?'),
(10363, '<=', '6223.20', 'Económico', 'Respuesta a ingreso mensual familiar <= 6223.20 en pregunta 60'),
(10339, '=', 'Si', 'Económico', 'Respuesta Si en pregunta Trabajas?'),
(10371, '=', 'Pensión (renta cerca de la UTVT)', 'Económico', 'Respuesta a lugar de residencia'),
(10301, '=', 'Si', 'Económico', 'Respuesta si  a alguien depende de ti ?'),
(10375, 'IN', 'De 60 a 90 minutos (1 hr a 1 ½ hrs),De 90 a 120 minutos (1 ½ hrs a 2 hrs),Más de 120 minutos (Más de 2 hrs)', 'Económico', 'Tiempo de traslado en pregunta'),

///////////END ECONOMICO////////////


/////////////////////SALUD////////////////////////



INSERT INTO reglas_clasificacion (pregunta_id, operador, valor, grupo, descripcion)
VALUES
(10387, 'IN', 'Tienes alguna deficiencia auditiva,Problema de movilidad motriz,Otro:', 'Salud', 'Condiciones de salud (lentes, problmeas notices , etc)'),
(10394, '=', 'Si', 'Salud', 'Respuesta Si '),
(10388, '=', 'Si', 'Salud', 'Respuesta Si a Padecimiento cronico'),
(10390, '=', 'Si', 'Salud', 'Respuesta Si a Tienes alguna alergia?'),
(10392, '=', 'Si', 'Salud', 'Respueta Tomas algun medicamento periodicamente?');


///////////////////END SALUD////////////////////////


//////////////////PATERNAL///////////////////////////
INSERT INTO reglas_clasificacion (pregunta_id, operador, valor, grupo, descripcion)
VALUES (10299, 'IN', 'Divorciad(a),Viudo(a),Unión libre,Casado(a)', 'Paternal', 'Estado civil en pregunta 10299');
INSERT INTO clasificacion_estudiantes (estudiante_id, grupo, pregunta_id, respuesta)


//////////////////END PATERNAL///////////////////////////
SELECT 
    r.estudiante_id, 
    rc.grupo, 
    r.pregunta_id, 
    r.respuesta
FROM respuestas r
JOIN reglas_clasificacion rc ON r.pregunta_id = rc.pregunta_id
WHERE (
    (rc.operador = '='    AND r.respuesta = rc.valor)
    OR (rc.operador = '!=' AND r.respuesta <> rc.valor)
    OR (rc.operador = '<=' AND r.respuesta <= rc.valor)
    OR (rc.operador = '>'  AND r.respuesta >  rc.valor)
    OR (rc.operador = 'IN' AND FIND_IN_SET(r.respuesta, rc.valor) > 0)
    OR (rc.operador = 'NOT IN' AND FIND_IN_SET(r.respuesta, rc.valor) = 0)
);